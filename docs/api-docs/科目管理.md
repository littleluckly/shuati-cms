# 科目管理 API

本文档包含所有与科目管理相关的 API 接口。

## 1. 获取所有科目

**接口地址**: `GET /subjects`

**接口描述**: 获取所有启用状态的科目列表

**请求参数**: 无

**请求示例**:

```
GET http://localhost:3000/subjects
```

**响应示例**:

```json
{
  "success": true,
  "data": [
    {
      "_id": "64f1a2b3c4d5e6f789012345",
      "name": "前端开发面试",
      "code": "FE_INTERVIEW",
      "description": "涵盖 JS、CSS、Vue、React 等",
      "tags": [
        { "name": "JavaScript", "type": "language" },
        { "name": "CSS", "type": "style" },
        { "name": "React", "type": "framework" },
        { "name": "Vue", "type": "framework" },
        { "name": "工程化", "type": "tooling" }
      ],
      "userTags": [
        { "name": "面试重点", "type": "priority" },
        { "name": "高频题", "type": "frequency" }
      ],
      "difficultyLevels": ["简单", "中等", "困难"],
      "isEnabled": true,
      "createdAt": "2023-09-01T00:00:00.000Z",
      "updatedAt": "2023-09-01T00:00:00.000Z"
    }
  ],
  "message": "操作成功"
}
```

## 2. 获取所有科目详细信息

**接口地址**: `GET /subjects/all`

**接口描述**: 获取所有启用状态的科目列表，包含题目统计信息

**请求参数**: 无

**请求示例**:

```
GET http://localhost:3000/subjects/all
```

**响应示例**:

```json
{
  "success": true,
  "data": [
    {
      "_id": "64f1a2b3c4d5e6f789012345",
      "name": "前端开发面试",
      "code": "FE_INTERVIEW",
      "description": "涵盖 JS、CSS、Vue、React 等",
      "tags": [
        { "name": "JavaScript", "type": "language" },
        { "name": "CSS", "type": "style" },
        { "name": "React", "type": "framework" },
        { "name": "Vue", "type": "framework" },
        { "name": "工程化", "type": "tooling" }
      ],
      "userTags": [
        { "name": "面试重点", "type": "priority" },
        { "name": "高频题", "type": "frequency" }
      ],
      "difficultyLevels": ["简单", "中等", "困难"],
      "isEnabled": true,
      "createdAt": "2023-09-01T00:00:00.000Z",
      "updatedAt": "2023-09-01T00:00:00.000Z",
      "questionCount": 120,
      "difficultyCount": {
        "easy": 40,
        "medium": 50,
        "hard": 30
      }
    }
  ],
  "message": "操作成功"
}
```

**字段说明**:

- `questionCount`: 该科目的题目总数
- `difficultyCount`: 各难度等级的题目数量

## 3. 根据 ID 获取科目详情

**接口地址**: `GET /subjects/:id`

**接口描述**: 根据科目 ID 获取科目详情

**请求参数**:
| 参数名 | 类型 | 位置 | 必填 | 说明 |
|--------|------|------|------|------|
| id | string | path | 是 | 科目 ID |

**请求示例**:

```
GET http://localhost:3000/subjects/64f1a2b3c4d5e6f789012345
```

**响应示例**:

```json
{
  "success": true,
  "data": {
    "_id": "64f1a2b3c4d5e6f789012345",
    "name": "前端开发面试",
    "code": "FE_INTERVIEW",
    "description": "涵盖 JS、CSS、Vue、React 等",
    "tags": [
      { "name": "JavaScript", "type": "language" },
      { "name": "CSS", "type": "style" },
      { "name": "React", "type": "framework" },
      { "name": "Vue", "type": "framework" },
      { "name": "工程化", "type": "tooling" }
    ],
    "userTags": [
      { "name": "面试重点", "type": "priority" },
      { "name": "高频题", "type": "frequency" }
    ],
    "difficultyLevels": ["简单", "中等", "困难"],
    "isEnabled": true,
    "createdAt": "2023-09-01T00:00:00.000Z",
    "updatedAt": "2023-09-01T00:00:00.000Z"
  },
  "message": "操作成功"
}
```

**错误响应**:

```json
{ "success": false, "data": null, "message": "科目不存在" }
```

## 4. 根据科目 ID 获取所有标签

**接口地址**: `GET /subjects/:id/tags`

**接口描述**: 根据科目 ID 获取该科目下的所有标签列表

**请求参数**:
| 参数名 | 类型 | 位置 | 必填 | 说明 |
|--------|------|------|------|------|
| id | string | path | 是 | 科目 ID |

**请求示例**:

```
GET http://localhost:3000/subjects/64f1a2b3c4d5e6f789012345/tags
```

**响应示例**:

```json
{
  "success": true,
  "data": [
    { "name": "JavaScript", "type": "language" },
    { "name": "CSS", "type": "style" },
    { "name": "React", "type": "framework" },
    { "name": "Vue", "type": "framework" },
    { "name": "工程化", "type": "tooling" }
  ],
  "message": "操作成功"
}
```

## 5. 根据科目 ID 获取标签计数

**接口地址**: `GET /subjects/:id/tags-count`

**接口描述**: 根据科目 ID 获取该科目下的标签统计信息

**请求参数**:
| 参数名 | 类型 | 位置 | 必填 | 说明 |
|--------|------|------|------|------|
| id | string | path | 是 | 科目 ID |

**请求示例**:

```
GET http://localhost:3000/subjects/64f1a2b3c4d5e6f789012345/tags-count
```

**响应示例**:

```json
{
  "success": true,
  "data": [
    { "name": "JavaScript", "count": 45 },
    { "name": "CSS", "count": 30 },
    { "name": "React", "count": 25 },
    { "name": "Vue", "count": 20 },
    { "name": "工程化", "count": 15 }
  ],
  "message": "操作成功"
}
```

**字段说明**:

- `count`: 该标签下的题目数量
